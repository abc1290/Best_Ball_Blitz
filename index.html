<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Random Team Selection Test</title>
  <style>
    body {
      font-family: 'Arial', sans-serif;
      line-height: 1.6;
      max-width: 800px;
      margin: 0 auto;
      padding: 20px;
      background-color: #f5f5f5;
      color: #333;
    }
    h1, h2, h3 {
      color: #2d5d2a;
    }
    button {
      background-color: #3a803a;
      color: white;
      border: none;
      padding: 10px 15px;
      border-radius: 4px;
      cursor: pointer;
      font-weight: bold;
      margin-right: 5px;
      margin-bottom: 5px;
    }
    button:hover { background-color: #2d632d; }
    button:disabled { background-color: #cccccc; cursor: not-allowed; }
    .team-member {
      margin: 8px 0; padding: 5px;
      background-color: #ffffff;
      border-radius: 4px;
      box-shadow: 0 1px 2px rgba(0,0,0,0.05);
    }
    .selection-fullscreen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.9);
      z-index: 1000;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      color: white;
    }
  </style>
</head>
<body>
  <h1>Random Team Selection Test</h1>
  
  <button id="randomTeamSelectBtn">Random Team Selection</button>
  
  <div id="teamsContainer"></div>
  
  <script>
    // Sample data for testing
    const sampleGroups = {
      A: [
        { name: "Woods, Tiger", handicap: 0, isPlus: true, displayHandicap: "+0" },
        { name: "Johnson, Dustin", handicap: 1.2, isPlus: false, displayHandicap: "1.2" },
        { name: "McIlroy, Rory", handicap: 0.5, isPlus: false, displayHandicap: "0.5" }
      ],
      B: [
        { name: "Mickelson, Phil", handicap: 3.5, isPlus: false, displayHandicap: "3.5" },
        { name: "Spieth, Jordan", handicap: 2.8, isPlus: false, displayHandicap: "2.8" },
        { name: "Thomas, Justin", handicap: 2.1, isPlus: false, displayHandicap: "2.1" }
      ],
      C: [
        { name: "Rahm, Jon", handicap: 5.6, isPlus: false, displayHandicap: "5.6" },
        { name: "DeChambeau, Bryson", handicap: 4.9, isPlus: false, displayHandicap: "4.9" },
        { name: "Koepka, Brooks", handicap: 4.2, isPlus: false, displayHandicap: "4.2" }
      ],
      D: [
        { name: "Matsuyama, Hideki", handicap: 8.7, isPlus: false, displayHandicap: "8.7" },
        { name: "Finau, Tony", handicap: 7.3, isPlus: false, displayHandicap: "7.3" },
        { name: "Casey, Paul", handicap: 6.8, isPlus: false, displayHandicap: "6.8" }
      ]
    };
    
    const teams = [];
    
    // Random Team Selection function
    function randomTeamSelection() {
      const groups = sampleGroups;
      
      // Check if there are enough players in each group
      if (groups.A.length === 0 || groups.B.length === 0 || 
          groups.C.length === 0 || groups.D.length === 0) {
        alert("Not enough players left to form a full team.");
        return;
      }
      
      // Create a simple overlay to display the results
      const overlay = document.createElement('div');
      overlay.className = 'selection-fullscreen';
      overlay.id = 'random-selection-overlay';
      
      const header = document.createElement('h2');
      header.textContent = 'Random Team Selection';
      overlay.appendChild(header);
      
      // Create a container for the selected players
      const teamContainer = document.createElement('div');
      teamContainer.style.width = '80%';
      teamContainer.style.margin = '20px auto';
      teamContainer.style.backgroundColor = 'rgba(255, 255, 255, 0.9)';
      teamContainer.style.padding = '20px';
      teamContainer.style.borderRadius = '8px';
      teamContainer.style.color = '#333';
      overlay.appendChild(teamContainer);
      
      // Add buttons
      const buttonsContainer = document.createElement('div');
      buttonsContainer.style.marginTop = '30px';
      
      const acceptButton = document.createElement('button');
      acceptButton.textContent = 'Accept Team';
      acceptButton.style.marginRight = '20px';
      
      const rerollButton = document.createElement('button');
      rerollButton.textContent = 'Reroll Team';
      
      buttonsContainer.appendChild(acceptButton);
      buttonsContainer.appendChild(rerollButton);
      overlay.appendChild(buttonsContainer);
      
      document.body.appendChild(overlay);
      
      // Function to randomly select players and display them
      function selectRandomPlayers() {
        // Select one random player from each group
        const playerA = groups.A[Math.floor(Math.random() * groups.A.length)];
        const playerB = groups.B[Math.floor(Math.random() * groups.B.length)];
        const playerC = groups.C[Math.floor(Math.random() * groups.C.length)];
        const playerD = groups.D[Math.floor(Math.random() * groups.D.length)];
        
        // Display the selected players
        teamContainer.innerHTML = `
          <h3>Randomly Selected Team</h3>
          <div class="team-member" style="padding: 10px; margin: 5px 0; background-color: #f0f0f0; border-radius: 5px;">
            <strong>Group A:</strong> ${playerA.name} (${playerA.displayHandicap})
          </div>
          <div class="team-member" style="padding: 10px; margin: 5px 0; background-color: #f0f0f0; border-radius: 5px;">
            <strong>Group B:</strong> ${playerB.name} (${playerB.displayHandicap})
          </div>
          <div class="team-member" style="padding: 10px; margin: 5px 0; background-color: #f0f0f0; border-radius: 5px;">
            <strong>Group C:</strong> ${playerC.name} (${playerC.displayHandicap})
          </div>
          <div class="team-member" style="padding: 10px; margin: 5px 0; background-color: #f0f0f0; border-radius: 5px;">
            <strong>Group D:</strong> ${playerD.name} (${playerD.displayHandicap})
          </div>
        `;
        
        // Calculate and display team handicap
        const teamHandicap = calculateTeamHandicap([playerA, playerB, playerC, playerD]);
        const displayHandicap = teamHandicap.toFixed(1);
        const displaySign = teamHandicap < 0 ? '+' : '';
        
        const handicapDiv = document.createElement('div');
        handicapDiv.style.marginTop = '15px';
        handicapDiv.style.fontWeight = 'bold';
        handicapDiv.innerHTML = `Team Handicap: ${displaySign}${Math.abs(displayHandicap)}`;
        teamContainer.appendChild(handicapDiv);
        
        return { playerA, playerB, playerC, playerD };
      }
      
      // Helper function to calculate team handicap
      function calculateTeamHandicap(members) {
        let total = 0;
        members.forEach(player => {
          const value = player.isPlus ? -player.handicap : player.handicap;
          total += value;
        });
        return total;
      }
      
      // Initial selection
      let selectedPlayers = selectRandomPlayers();
      
      // Set up button events
      rerollButton.addEventListener('click', () => {
        // Reselect random players
        selectedPlayers = selectRandomPlayers();
      });
      
      acceptButton.addEventListener('click', () => {
        // Remove selected players from their groups
        groups.A.splice(groups.A.indexOf(selectedPlayers.playerA), 1);
        groups.B.splice(groups.B.indexOf(selectedPlayers.playerB), 1);
        groups.C.splice(groups.C.indexOf(selectedPlayers.playerC), 1);
        groups.D.splice(groups.D.indexOf(selectedPlayers.playerD), 1);
        
        // Create and add the team
        const team = {
          id: teams.length + 1,
          members: [selectedPlayers.playerA, selectedPlayers.playerB, selectedPlayers.playerC, selectedPlayers.playerD],
          totalHandicap: calculateTeamHandicap([selectedPlayers.playerA, selectedPlayers.playerB, selectedPlayers.playerC, selectedPlayers.playerD])
        };
        teams.push(team);
        
        // Update the UI
        displayTeams();
        
        // Remove the overlay
        document.body.removeChild(overlay);
      });
    }
    
    // Function to display teams
    function displayTeams() {
      const teamsContainer = document.getElementById('teamsContainer');
      teamsContainer.innerHTML = '';
      
      teams.forEach(team => {
        const teamCard = document.createElement('div');
        teamCard.className = 'team-card';
        teamCard.style.margin = '10px 0';
        teamCard.style.padding = '15px';
        teamCard.style.border = '1px solid #ddd';
        teamCard.style.borderRadius = '4px';
        teamCard.style.backgroundColor = '#f9f9f9';
        
        let teamHtml = `<h3>Team ${team.id}</h3>`;
        
        team.members.forEach(player => {
          teamHtml += `
            <div class="team-member">
              ${player.name} (${player.displayHandicap})
            </div>
          `;
        });
        
        const displayHandicap = team.totalHandicap.toFixed(1);
        const displaySign = team.totalHandicap < 0 ? '+' : '';
        
        teamHtml += `
          <div style="margin-top: 10px; font-weight: bold;">
            Team Handicap: ${displaySign}${Math.abs(displayHandicap)}
          </div>
        `;
        
        teamCard.innerHTML = teamHtml;
        teamsContainer.appendChild(teamCard);
      });
    }
    
    // Set up event listener for the Random Team Selection button
    document.getElementById('randomTeamSelectBtn').addEventListener('click', randomTeamSelection);
  </script>
</body>
</html>
